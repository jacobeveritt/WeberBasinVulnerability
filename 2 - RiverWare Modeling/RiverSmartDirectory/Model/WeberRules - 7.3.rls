# RiverWare_Ruleset 7.2.3 Patch
# Created 09:43 May 7, 2018
# 
RULESET
NAME "Weber Model - Base (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run) (from MRM run)";
AGENDA_ORDER ASCENDING;
DESCRIPTION "";
PRECISION   8;
NOTES "";
BEGIN

  POLICY_GROUP   "Finalization";
  DESCRIPTION    "";
  ACTIVE         TRUE;
  NOTES          "";
  BEGIN

    RULE                 "Willard Spills";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "RES8 Willard Bay.Regulated Spill" [] := "Max"( $ "RES8 Willard Bay.Storage" [] - $ "Reservoir Data.Max Storages" [7.00000000, 0.00000000], 0.00000000 "acre-ft" ) / "GetTimestep"( @"t" );

    END;

    RULE                 "Plain City Flood Capacity";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      IF_STATEMENT ($ "Weber River Near GSL.Outflow" [] > $ "Other Data.Plain City Flood Capacity" []) THEN
            $ "Willard Diversion.Diversion Request" [] := $ "Willard Diversion.Diversion Request" [] + ( $ "Weber River Near GSL.Outflow" [] - $ "Other Data.Plain City Flood Capacity" [] );

      END_IF_STATEMENT;

    END;

    RULE                 "Willard Diversion";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "Willard Diversion.Diversion Request" [] := "Max"( $ "Weber River Near GSL.Outflow" [] - ( $ "Q82 Reach Gain.Gage Outflow" [] + $ "Q68 Sewage Outfall.Gage Outflow" [] ) + "Min"( $ "Warren Canal Diversion:SA16 Warren Canal.Diversion" [] + $ "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge.Diversion" [], $ "Q82 Reach Gain.Gage Outflow" [] + $ "Q68 Sewage Outfall.Gage Outflow" [] ), 0.00000000 "acre-ft/month" );

    END;

  END;

  POLICY_GROUP   "7th Call Set";
  DESCRIPTION    "";
  ACTIVE         TRUE;
  NOTES          "";
  BEGIN

    RULE                 "RES5";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

    INACTIVE      % "RES5 East Canyon" & "Outflow" [] := "ShortageCall"( { % "Slaterville Diversion:SA15 Slaterville" }, % "RES5 East Canyon" );

      % "RES5 East Canyon" & "Outflow" [] := "ShortageCallPool"( { % "Slaterville Diversion:SA15 Slaterville" }, % "RES5 East Canyon", $ "Protected Pools.East Canyon", 1.00000000 );

      $ "Protected Pools.East Canyon" [] := $ "Protected Pools.East Canyon" [] - "Min"( $ "Protected Pools.East Canyon" [], FOR ( OBJECT area IN { % "Slaterville Diversion:SA15 Slaterville" } ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR * "GetTimestep"( @"t" ) );

    END;

  END;

  POLICY_GROUP   "6th Call Set";
  DESCRIPTION    "";
  ACTIVE         TRUE;
  NOTES          "";
  BEGIN

    RULE                 "RES5";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

    INACTIVE      % "RES5 East Canyon" & "Outflow" [] := "ShortageCall"( { % "Warren Canal Diversion:SA16 Warren Canal" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" , % "GSL Minerals Diversion:SA18 GSL Minerals" }, % "RES5 East Canyon" );

    INACTIVE      % "RES5 East Canyon" & "Outflow" [] := "ShortageCall"( { % "Warren Canal Diversion:SA16 Warren Canal" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" }, % "RES5 East Canyon" );

      % "RES5 East Canyon" & "Outflow" [] := "ShortageCallPool"( { % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" }, % "RES5 East Canyon", $ "Protected Pools.East Canyon", 1.00000000 );

      $ "Protected Pools.East Canyon" [] := $ "Protected Pools.East Canyon" [] - "Min"( $ "Protected Pools.East Canyon" [], FOR ( OBJECT area IN { % "Warren Canal Diversion:SA16 Warren Canal" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" } ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR * "GetTimestep"( @"t" ) );

      $ "Weber River Near Gateway 1.Minimum Diversion Bypass" [] := $ "Weber River Near Gateway 1.Minimum Diversion Bypass" [] + "Min"( $ "Protected Pools.East Canyon" [] / "GetTimestep"( @"t" ), FOR ( OBJECT area IN { % "Warren Canal Diversion:SA16 Warren Canal" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" } ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR );

    END;

    RULE                 "RES4";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES4 Lost Creek" & "Outflow" [] := "ShortageCall"( { % "Slaterville Diversion:SA15 Slaterville" , % "Gateway Canal Diversion:SA10 Gateway Canal" }, % "RES4 Lost Creek" );

    END;

  END;

  POLICY_GROUP   "5th Call Set";
  DESCRIPTION    "";
  ACTIVE         TRUE;
  NOTES          "";
  BEGIN

    RULE                 "RES5";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

    INACTIVE      % "RES5 East Canyon" & "Outflow" [] := "ShortageCall"( { % "Gateway Canal Diversion 1" , % "Gateway To Slaterville Diversion:SA19 Gateway To Slaterville" }, % "RES5 East Canyon" );

      % "RES5 East Canyon" & "Outflow" [] := "ShortageCallPool"( { % "Gateway Canal Diversion 1" }, % "RES5 East Canyon", $ "Protected Pools.East Canyon", 1.00000000 );

      $ "Protected Pools.East Canyon" [] := $ "Protected Pools.East Canyon" [] - "Min"( $ "Protected Pools.East Canyon" [], FOR ( OBJECT area IN { % "Gateway Canal Diversion 1" } ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR * "GetTimestep"( @"t" ) );

    END;

    RULE                 "RES4";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT TRUE;
    NOTES                "";
    BEGIN

      % "RES4 Lost Creek" & "Outflow" [] := "ShortageCall"( { % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" , % "GSL Minerals Diversion:SA18 GSL Minerals" }, % "RES4 Lost Creek" );

    END;

    RULE                 "RES3 Bypass A15";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT TRUE;
    NOTES                "";
    BEGIN

      % "RES3 Echo" & "Outflow" [] := "ShortageCall"( { % "Slaterville Diversion:SA15 Slaterville" }, % "RES3 Echo" );

    END;

    RULE                 "RES2";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT TRUE;
    NOTES                "";
    BEGIN

      % "RES2 Rockport" & "Outflow" [] := "ShortageCall"( { % "Slaterville Diversion:SA15 Slaterville" }, % "RES2 Rockport" );

    END;

    RULE                 "RES3 Bypass A10";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT TRUE;
    NOTES                "";
    BEGIN

      % "RES3 Echo" & "Outflow" [] := "ShortageCall"( { % "Gateway Canal Diversion 1" }, % "RES3 Echo" );

    END;

    RULE                 "RES2 Bypass A10";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT TRUE;
    NOTES                "";
    BEGIN

      % "RES2 Rockport" & "Outflow" [] := "ShortageCall"( { % "Gateway Canal Diversion 1" }, % "RES2 Rockport" );

    END;

    RULE                 "RES1";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES1 Smith And Morehouse" & "Outflow" [] := "ShortageCall"( { % "Gateway Canal Diversion 1" }, % "RES1 Smith And Morehouse" );

    END;

  END;

  POLICY_GROUP   "4th Call Set";
  DESCRIPTION    "";
  ACTIVE         TRUE;
  NOTES          "";
  BEGIN

    RULE                 "RES3 Bypass A10";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#ff55ff";
    NOTES                "";
    BEGIN

      % "RES3 Echo" & "Outflow" [] := "ShortageCall"( { % "Gateway Canal Diversion 1" }, % "RES3 Echo" );

    END;

    RULE                 "RES10";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#ff55ff";
    NOTES                "";
    BEGIN

      % "RES10 Chalk Creek" & "Outflow" [] := "ShortageCall"( { % "Gateway Canal Diversion:SA10 Gateway Canal" }, % "RES10 Chalk Creek" );

    END;

    RULE                 "RES9";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#ffaa00";
    NOTES                "";
    BEGIN

      % "RES9 Gravel Pit" & "Outflow" [] := "ShortageCall"( { % "Gateway Canal Diversion:SA10 Gateway Canal" }, % "RES9 Gravel Pit" );

    END;

    RULE                 "ASR Used Accounting";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#00aa7f";
    NOTES                "";
    BEGIN

      IF_STATEMENT ($ "Other Data.ASRHalf" [] >= $ "WBWCD ASR.Pumped Flow" [] * "GetTimestep"( @"t" )) THEN
            $ "Other Data.ASRHalf" [] := $ "Other Data.ASRHalf" [] - $ "WBWCD ASR.Pumped Flow" [] * "GetTimestep"( @"t" );

      ELSE
            IF_STATEMENT ($ "Other Data.ASRHalf" [] + $ "Other Data.ASRYr2" [] >= $ "WBWCD ASR.Pumped Flow" [] * "GetTimestep"( @"t" )) THEN
            $ "Other Data.ASRHalf" [] := 0.00000000 "acre-feet";

            $ "Other Data.ASRYr2" [] := $ "Other Data.ASRYr2" [] - ( $ "WBWCD ASR.Pumped Flow" [] * "GetTimestep"( @"t" ) - $ "Other Data.ASRHalf" [] );

      ELSE
            IF_STATEMENT ($ "Other Data.ASRHalf" [] + $ "Other Data.ASRYr2" [] + $ "Other Data.ASRYr1" [] >= $ "WBWCD ASR.Pumped Flow" [] * "GetTimestep"( @"t" )) THEN
            $ "Other Data.ASRHalf" [] := 0.00000000 "acre-feet";

            $ "Other Data.ASRYr2" [] := 0.00000000 "acre-feet";

            $ "Other Data.ASRYr1" [] := $ "Other Data.ASRYr1" [] - ( $ "WBWCD ASR.Pumped Flow" [] * "GetTimestep"( @"t" ) - $ "Other Data.ASRHalf" [] - $ "Other Data.ASRYr2" [] );

      ELSE
            IF_STATEMENT ($ "Other Data.ASRHalf" [] + $ "Other Data.ASRYr2" [] + $ "Other Data.ASRYr1" [] + $ "Other Data.ASRCurrentYr" [] >= $ "WBWCD ASR.Pumped Flow" [] * "GetTimestep"( @"t" )) THEN
            $ "Other Data.ASRHalf" [] := 0.00000000 "acre-feet";

            $ "Other Data.ASRYr2" [] := 0.00000000 "acre-feet";

            $ "Other Data.ASRYr1" [] := 0.00000000 "acre-feet";

            $ "Other Data.ASRCurrentYr" [] := $ "Other Data.ASRCurrentYr" [] - ( $ "WBWCD ASR.Pumped Flow" [] * "GetTimestep"( @"t" ) - $ "Other Data.ASRHalf" [] - $ "Other Data.ASRYr2" [] - $ "Other Data.ASRYr1" [] );

      ELSE
            $ "Other Data.ASRHalf" [] := 0.00000000 "acre-feet";

            $ "Other Data.ASRYr2" [] := 0.00000000 "acre-feet";

            $ "Other Data.ASRYr1" [] := 0.00000000 "acre-feet";

            $ "Other Data.ASRCurrentYr" [] := 0.00000000 "acre-feet";

      END_IF_STATEMENT;

      END_IF_STATEMENT;

      END_IF_STATEMENT;

      END_IF_STATEMENT;

    END;

    RULE                 "ASR";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#00aa7f";
    NOTES                "";
    BEGIN

      % "WBWCD ASR" & "Pumped Flow" [] := "Min"( $ "WBWCD ASR.Storage" [] / "GetTimestep"( @"t" ), "ShortageCallGW"( { % "Gateway Canal Diversion:SA10 Gateway Canal" }, % "WBWCD ASR" ) );

    END;

    RULE                 "RES5";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

    INACTIVE      % "RES5 East Canyon" & "Outflow" [] := "ShortageCall"( { % "Gateway Canal Diversion 1" , % "Gateway To Slaterville Diversion:SA19 Gateway To Slaterville" }, % "RES5 East Canyon" );

      % "RES5 East Canyon" & "Outflow" [] := "ShortageCallPool"( { % "Gateway To Slaterville Diversion:SA19 Gateway To Slaterville" }, % "RES5 East Canyon", $ "Protected Pools.East Canyon", 1.00000000 );

      $ "Protected Pools.East Canyon" [] := $ "Protected Pools.East Canyon" [] - "Min"( $ "Protected Pools.East Canyon" [], FOR ( OBJECT area IN { % "Gateway To Slaterville Diversion:SA19 Gateway To Slaterville" } ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR * "GetTimestep"( @"t" ) );

    END;

    RULE                 "RES3";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES3 Echo" & "Outflow" [] := "ShortageCall"( { % "Slaterville Diversion:SA15 Slaterville" }, % "RES3 Echo" );

    END;

    RULE                 "RES3 Bypass";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES3 Echo" & "Outflow" [] := "ShortageCall"( { % "Additional WB Demand Diversion:SA20 Additional WB Demand" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" }, % "RES3 Echo" );

    END;

    RULE                 "RES2";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES2 Rockport" & "Outflow" [] := "ShortageCall"( { % "Additional WB Demand Diversion:SA20 Additional WB Demand" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" }, % "RES2 Rockport" );

    END;

  END;

  POLICY_GROUP   "3rd Call Set";
  DESCRIPTION    "";
  ACTIVE         TRUE;
  NOTES          "";
  BEGIN

    RULE                 "RES7";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES7 Pineview" & "Outflow" [] := "ShortageCallPool"( { % "Slaterville Diversion:SA15 Slaterville" }, % "RES7 Pineview", $ "Protected Pools.Pineview", 1.00000000 );

      $ "Protected Pools.Pineview" [] := $ "Protected Pools.Pineview" [] - "Min"( $ "Protected Pools.Pineview" [], FOR ( OBJECT area IN { % "Slaterville Diversion:SA15 Slaterville" } ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR * "GetTimestep"( @"t" ) );

    END;

    RULE                 "RES4";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES4 Lost Creek" & "Outflow" [] := "ShortageCall"( { % "Gateway Canal Diversion 1" , % "Gateway To Slaterville Diversion:SA19 Gateway To Slaterville" , % "Stoddard To Gateway Diversion:SA9 Stoddard To Gateway" }, % "RES4 Lost Creek" );

    END;

    RULE                 "RES3";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES3 Echo" & "Outflow" [] := "ShortageCall"( { % "Additional WB Demand Diversion:SA20 Additional WB Demand" , % "Warren Canal Diversion:SA16 Warren Canal" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" }, % "RES3 Echo" );

    END;

  END;

  POLICY_GROUP   "2nd Call Set";
  DESCRIPTION    "";
  ACTIVE         TRUE;
  NOTES          "";
  BEGIN

    RULE                 "RES8";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES8 Willard Bay" & "Release" [] := "ShortageCall"( { % "Slaterville Diversion:SA15 Slaterville" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" , % "Warren Canal Diversion:SA16 Warren Canal" }, % "RES8 Willard Bay" );

    END;

    RULE                 "RES5 Pool";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES5 East Canyon" & "Outflow" [] := "ShortageCallPool"( { % "Davis Weber Canal Diversion:SA11 Davis Weber Canal" }, % "RES5 East Canyon", $ "Protected Pools.Davis Weber Canal East Canyon", 1.00000000 );

      $ "Protected Pools.Davis Weber Canal East Canyon" [] := $ "Protected Pools.Davis Weber Canal East Canyon" [] - "Min"( $ "Protected Pools.Davis Weber Canal East Canyon" [], $ "Davis Weber Canal Diversion:SA11 Davis Weber Canal.Diversion Shortage" [] * "GetTimestep"( @"t" ) );

      % "Weber River Near Stoddard 1" & "Minimum Diversion Bypass" [] := "Min"( $ "Davis Weber Canal Diversion:SA11 Davis Weber Canal.Diversion Shortage" [], $ "Protected Pools.Davis Weber Canal East Canyon" [] / "GetTimestep"( @"t" ) ) + % "Weber River Near Stoddard 1" & "Minimum Diversion Bypass" [];

      % "Weber River Near Stoddard 2" & "Minimum Diversion Bypass" [] := "Min"( $ "Davis Weber Canal Diversion:SA11 Davis Weber Canal.Diversion Shortage" [], $ "Protected Pools.Davis Weber Canal East Canyon" [] / "GetTimestep"( @"t" ) );

      $ "Weber River Near Gateway 1.Available For Diversion" [] := $ "Weber River Near Gateway 1.Available For Diversion" [] + "Min"( $ "Davis Weber Canal Diversion:SA11 Davis Weber Canal.Diversion Shortage" [], $ "Protected Pools.Davis Weber Canal East Canyon" [] / "GetTimestep"( @"t" ) );

    END;

    RULE                 "RES7";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES7 Pineview" & "Outflow" [] := "ShortageCallPool"( { % "Davis Weber Canal PUMP Diversion 2" , % "Additional WB Demand Diversion:SA20 Additional WB Demand" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" }, % "RES7 Pineview", $ "Protected Pools.Pineview", 1.00000000 );

      $ "Protected Pools.Pineview" [] := $ "Protected Pools.Pineview" [] - "Min"( $ "Protected Pools.Pineview" [], FOR ( OBJECT area IN { % "Davis Weber Canal PUMP Diversion 2" , % "Additional WB Demand Diversion:SA20 Additional WB Demand" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" } ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR * "GetTimestep"( @"t" ) );

    END;

    RULE                 "SA9 Bypass";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "Weber River Near Stoddard 1.Available For Diversion" [] := $ "Weber River Near Stoddard 1.Available For Diversion" [];

    END;

    RULE                 "RES3 Bypass";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "RES3 Echo.Outflow" [] := "ShortageCall"( { % "Echo to Devils Slide Diversion:SA4 Echo to Devils Slide" , % "Devils Slide to Stoddard Diversion:SA6 Devils Slide to Stodard" , % "Stoddard To Gateway Diversion:SA9 Stoddard To Gateway" , % "Gateway Canal Diversion 1" , % "Gateway To Slaterville Diversion:SA19 Gateway To Slaterville" }, % "RES3 Echo" );

    END;

    RULE                 "RES2";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES2 Rockport" & "Outflow" [] := "ShortageCall"( { % "Echo to Devils Slide Diversion:SA4 Echo to Devils Slide" , % "Devils Slide to Stoddard Diversion:SA6 Devils Slide to Stodard" , % "Stoddard To Gateway Diversion:SA9 Stoddard To Gateway" , % "Gateway Canal Diversion 1" , % "Gateway To Slaterville Diversion:SA19 Gateway To Slaterville" }, % "RES2 Rockport" );

    END;

  END;

  POLICY_GROUP   "1st Call Set";
  DESCRIPTION    "";
  ACTIVE         TRUE;
  NOTES          "";
  BEGIN

    RULE                 "RES8";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES8 Willard Bay" & "Release" [] := "ShortageCall"( { % "Davis Weber Canal PUMP Diversion 2" , % "Additional WB Demand Diversion:SA20 Additional WB Demand" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" , % "GSL Minerals Diversion:SA18 GSL Minerals" }, % "RES8 Willard Bay" );

    INACTIVE      % "RES8 Willard Bay" & "Release" [] := "ShortageCall"( { % "Additional WB Demand Diversion:SA20 Additional WB Demand" , % "Ogden Bay Bird Refuge Diversion:SA17 Ogden Bay Bird Refuge" , % "GSL Minerals Diversion:SA18 GSL Minerals" }, % "RES8 Willard Bay" );

    END;

    RULE                 "RES7";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES7 Pineview" & "Outflow" [] := "ShortageCallPool"( { % "Warren Canal Diversion:SA16 Warren Canal" }, % "RES7 Pineview", $ "Protected Pools.Pineview", 1.00000000 );

      $ "Protected Pools.Pineview" [] := $ "Protected Pools.Pineview" [] - "Min"( $ "Protected Pools.Pineview" [], FOR ( OBJECT area IN { % "Warren Canal Diversion:SA16 Warren Canal" } ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR * "GetTimestep"( @"t" ) );

    END;

    RULE                 "RES7 50Percent";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES7 Pineview" & "Outflow" [] := "ShortageCallPool"( { % "Slaterville Diversion:SA15 Slaterville" }, % "RES7 Pineview", $ "Protected Pools.Pineview", 0.50000000 );

      $ "Protected Pools.Pineview" [] := $ "Protected Pools.Pineview" [] - "Min"( $ "Protected Pools.Pineview" [] * 0.50000000, FOR ( OBJECT area IN { % "Slaterville Diversion:SA15 Slaterville" } ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR * "GetTimestep"( @"t" ) );

    END;

    RULE                 "RES7 Pool";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

    INACTIVE      % "RES7 Pineview" & "Outflow" [] := "ShortageCallPool"( { % "Ogden Brigham and S Ogden Highline Canals:SA13 Ogden Brigham and S Ogden Highline Canals" , % "Ogden River Below Pineview Diversion:SA14 Ogden River Below Pineview" }, % "RES7 Pineview", $ "Protected Pools.Ogden River Project Pineview", 1.00000000 );

      % "RES7 Pineview" & "Outflow" [] := "ShortageCall"( { % "Ogden Brigham and S Ogden Highline Canals:SA13 Ogden Brigham and S Ogden Highline Canals" , % "Ogden River Below Pineview Diversion:SA14 Ogden River Below Pineview" }, % "RES7 Pineview" );

      $ "Protected Pools.Ogden River Project Pineview" [] := $ "Protected Pools.Ogden River Project Pineview" [] - "Min"( $ "Protected Pools.Ogden River Project Pineview" [], FOR ( OBJECT area IN { % "Ogden Brigham and S Ogden Highline Canals:SA13 Ogden Brigham and S Ogden Highline Canals" , % "Ogden River Below Pineview Diversion:SA14 Ogden River Below Pineview" } ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR * "GetTimestep"( @"t" ) );

    END;

    RULE                 "RES6";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES6 Causey" & "Outflow" [] := "ShortageCall"( { % "Weber Basin Project Ogden Valley:SA12 Weber Basin Project Ogden Valley" }, % "RES6 Causey" );

    END;

    RULE                 "RES5";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

    INACTIVE      % "RES5 East Canyon" & "Outflow" [] := "ShortageCall"( { % "East Canyon Diversion:SA8 East Canyon" }, % "RES5 East Canyon" );

      % "RES5 East Canyon" & "Outflow" [] := "ShortageCallPool"( { % "East Canyon Diversion:SA8 East Canyon" }, % "RES5 East Canyon", $ "Protected Pools.East Canyon", 1.00000000 );

      $ "Protected Pools.East Canyon" [] := $ "Protected Pools.East Canyon" [] - "Min"( $ "Protected Pools.East Canyon" [], FOR ( OBJECT area IN { % "East Canyon Diversion:SA8 East Canyon" } ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR * "GetTimestep"( @"t" ) );

    END;

    RULE                 "RES4";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES4 Lost Creek" & "Outflow" [] := "ShortageCall"( { % "Lost Creek Diversion:SA5 Lost Creek" }, % "RES4 Lost Creek" );

    END;

    RULE                 "RES3";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES3 Echo" & "Outflow" [] := "ShortageCall"( { % "Echo to Devils Slide Diversion:SA4 Echo to Devils Slide" , % "Devils Slide to Stoddard Diversion:SA6 Devils Slide to Stodard" , % "Stoddard To Gateway Diversion:SA9 Stoddard To Gateway" , % "Gateway Canal Diversion 1" , % "Gateway To Slaterville Diversion:SA19 Gateway To Slaterville" , % "Davis Weber Canal Diversion:SA11 Davis Weber Canal" }, % "RES3 Echo" );

    END;

    RULE                 "SA11 Bypass";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "Weber River Near Gateway 1.Available For Diversion" [] := $ "Weber River Near Gateway 1.Available For Diversion" [];

    END;

    RULE                 "RES2";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES2 Rockport" & "Outflow" [] := "ShortageCall"( { % "Wanship Diversion:SA3 Wanship to Echo" }, % "RES2 Rockport" );

    END;

    RULE                 "RES1";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES1 Smith And Morehouse" & "Outflow" [] := "ShortageCall"( { % "Oakley Diversion:SA2 Oakley to Wanship" , % "Park City Diversion:SA7 Park City" }, % "RES1 Smith And Morehouse" );

    END;

    RULE                 "RES1 Weber Provo";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES1 Smith And Morehouse" & "Outflow" [] := "Min"( "ShortageCall"( { % "Weber Provo Diversion:SA1 Weber Provo Canal" }, % "RES1 Smith And Morehouse" ), $ "RES1 Smith And Morehouse.Inflow" [] );

    END;

  END;

  POLICY_GROUP   "Initializations";
  DESCRIPTION    "";
  ACTIVE         TRUE;
  NOTES          "";
  BEGIN

    RULE                 "Demand Managment District Storage";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#00aaff";
    NOTES                "";
    BEGIN

      IF_STATEMENT ($ "Demand Data.ReductionStatus" [] == 2.00000000) THEN
            % "Park City Diversion:SA7 Park City" & "Diversion Requested" [] := "Max"( $ "Park City Diversion:SA7 Park City.Diversion" [], $ "Park City Diversion:SA7 Park City.Diversion Requested" [] * 0.90000000 );

            $ "Lost Creek Diversion:SA5 Lost Creek.Diversion Requested" [] := "Max"( $ "Lost Creek Diversion:SA5 Lost Creek.Diversion" [], $ "Lost Creek Diversion:SA5 Lost Creek.Diversion Requested" [] * 0.80000000 );

            % "Gateway Canal Diversion:SA10 Gateway Canal" & "Diversion Requested" [] := "Max"( $ "Gateway Canal Diversion 1.Diversion Request" [], $ "Gateway Canal Diversion 1.Diversion Request" [] * 0.80000000 );

            $ "Weber Basin Project Ogden Valley:SA12 Weber Basin Project Ogden Valley.Diversion Requested" [] := "Max"( $ "Weber Basin Project Ogden Valley:SA12 Weber Basin Project Ogden Valley.Diversion" [], $ "Weber Basin Project Ogden Valley:SA12 Weber Basin Project Ogden Valley.Diversion Requested" [] * 0.80000000 );

            $ "Slaterville Diversion:SA15 Slaterville.Diversion Requested" [] := "Max"( $ "Slaterville Diversion:SA15 Slaterville.Diversion" [], $ "Slaterville Diversion:SA15 Slaterville.Diversion Requested" [] * 0.92000000 );

            % "Additional WB Demand Diversion:SA20 Additional WB Demand" & "Diversion Requested" [] := "Max"( $ "Additional WB Demand Diversion:SA20 Additional WB Demand.Diversion" [], $ "Additional WB Demand Diversion:SA20 Additional WB Demand.Diversion Requested" [] * 0.80000000 );

      END_IF_STATEMENT;

      IF_STATEMENT ($ "Demand Data.ReductionStatus" [] == 3.00000000) THEN
            % "Park City Diversion:SA7 Park City" & "Diversion Requested" [] := "Max"( $ "Park City Diversion:SA7 Park City.Diversion" [], $ "Park City Diversion:SA7 Park City.Diversion Requested" [] * 0.65000000 );

            $ "Lost Creek Diversion:SA5 Lost Creek.Diversion Requested" [] := "Max"( $ "Lost Creek Diversion:SA5 Lost Creek.Diversion" [], $ "Lost Creek Diversion:SA5 Lost Creek.Diversion Requested" [] * 0.40000000 );

            % "Gateway Canal Diversion:SA10 Gateway Canal" & "Diversion Requested" [] := "Max"( $ "Gateway Canal Diversion 1.Diversion Request" [], $ "Gateway Canal Diversion 1.Diversion Request" [] * 0.40000000 );

            $ "Weber Basin Project Ogden Valley:SA12 Weber Basin Project Ogden Valley.Diversion Requested" [] := "Max"( $ "Weber Basin Project Ogden Valley:SA12 Weber Basin Project Ogden Valley.Diversion" [], $ "Weber Basin Project Ogden Valley:SA12 Weber Basin Project Ogden Valley.Diversion Requested" [] * 0.40000000 );

            $ "Slaterville Diversion:SA15 Slaterville.Diversion Requested" [] := "Max"( $ "Slaterville Diversion:SA15 Slaterville.Diversion" [], $ "Slaterville Diversion:SA15 Slaterville.Diversion Requested" [] * 0.83000000 );

            % "Additional WB Demand Diversion:SA20 Additional WB Demand" & "Diversion Requested" [] := "Max"( $ "Additional WB Demand Diversion:SA20 Additional WB Demand.Diversion" [], $ "Additional WB Demand Diversion:SA20 Additional WB Demand.Diversion Requested" [] * 0.40000000 );

      END_IF_STATEMENT;

      IF_STATEMENT ($ "Demand Data.ReductionStatus" [] == 4.00000000) THEN
            % "Park City Diversion:SA7 Park City" & "Diversion Requested" [] := "Max"( $ "Park City Diversion:SA7 Park City.Diversion" [], $ "Park City Diversion:SA7 Park City.Diversion Requested" [] * 0.36000000 );

            $ "Lost Creek Diversion:SA5 Lost Creek.Diversion Requested" [] := "Max"( $ "Lost Creek Diversion:SA5 Lost Creek.Diversion" [], $ "Lost Creek Diversion:SA5 Lost Creek.Diversion Requested" [] * 0.05000000 );

            % "Gateway Canal Diversion:SA10 Gateway Canal" & "Diversion Requested" [] := "Max"( $ "Gateway Canal Diversion 1.Diversion Request" [], $ "Gateway Canal Diversion 1.Diversion Request" [] * 0.05000000 );

            $ "Weber Basin Project Ogden Valley:SA12 Weber Basin Project Ogden Valley.Diversion Requested" [] := "Max"( $ "Weber Basin Project Ogden Valley:SA12 Weber Basin Project Ogden Valley.Diversion" [], $ "Weber Basin Project Ogden Valley:SA12 Weber Basin Project Ogden Valley.Diversion Requested" [] * 0.05000000 );

            $ "Slaterville Diversion:SA15 Slaterville.Diversion Requested" [] := "Max"( $ "Slaterville Diversion:SA15 Slaterville.Diversion" [], $ "Slaterville Diversion:SA15 Slaterville.Diversion Requested" [] * 0.75000000 );

            % "Additional WB Demand Diversion:SA20 Additional WB Demand" & "Diversion Requested" [] := "Max"( $ "Additional WB Demand Diversion:SA20 Additional WB Demand.Diversion" [], $ "Additional WB Demand Diversion:SA20 Additional WB Demand.Diversion Requested" [] * 0.05000000 );

      END_IF_STATEMENT;

    END;

    RULE                 "Demand Management Status Check";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT TRUE;
  NAMES_COLOR  "#00aaff";
    NOTES                "";
    BEGIN

      $ "Demand Data.ReductionStatus" [] := "Max"( $ "Demand Data.TotalReductionStatus" [], $ "Demand Data.UpstreamReductionStatus" [] );

    END;

    RULE                 "Demand Management Total Status Check";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT TRUE;
  NAMES_COLOR  "#00aaff";
    NOTES                "";
    BEGIN

    BREAKPOINT AFTER_EXEC TRUE;
    DESCRIPTION          "<comment>reduction status can take values of 1, 2, 3, and 4, which correspond with a Green, <br>Yellow, Orange, and Red reduction respectively. <br>";
      IF_STATEMENT (@"t" == "CompletePartialDate"( @"March", @"t" )) THEN
            IF_STATEMENT ($ "Other Data.TotalStorage" [@"t - 1"] <= $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 0.00000000]) THEN
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [0.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [1.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [1.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [1.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [1.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [2.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [1.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [2.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [2.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [2.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [3.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [2.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [3.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [3.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [3.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.TotalStorage" [@"t - 1"] <= $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 0.00000000] AND $ "Other Data.TotalStorage" [@"t - 1"] > $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [4.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [5.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [5.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [5.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [5.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [6.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [5.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [6.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [6.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [6.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [7.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [6.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [7.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [7.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [7.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.TotalStorage" [@"t - 1"] <= $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 0.00000000] AND $ "Other Data.TotalStorage" [@"t - 1"] > $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [8.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [9.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [9.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [9.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [9.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [10.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [9.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [10.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [10.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [10.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [11.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [10.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [11.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [11.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [11.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.TotalStorage" [@"t - 1"] <= $ "Demand Data.TotalStorageReductionLookup" [12.00000000, 0.00000000] AND $ "Other Data.TotalStorage" [@"t - 1"] > $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [12.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [12.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [12.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [12.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [13.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [12.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [13.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [13.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [13.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [14.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [13.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [14.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [14.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [14.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [15.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [14.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [15.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [15.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [15.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := $ "Demand Data.TotalReductionStatus" [@"t - 1"];

      END_IF_STATEMENT;

    END;

    RULE                 "Demand Managment Upstream Status Check";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#00aaff";
    NOTES                "";
    BEGIN

    DESCRIPTION          "<comment>reduction status can take values of 1, 2, 3, and 4, which correspond with a Green, <br>Yellow, Orange, and Red reduction respectively. <br>";
      IF_STATEMENT (@"t" == "CompletePartialDate"( @"March", @"t" )) THEN
            IF_STATEMENT ($ "Other Data.UpstreamStorage" [@"t - 1"] <= $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 0.00000000]) THEN
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [1.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [1.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [1.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [1.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [2.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [1.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [2.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [2.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [2.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [3.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [2.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [3.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [3.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [3.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.UpstreamStorage" [@"t - 1"] <= $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 0.00000000] AND $ "Other Data.UpstreamStorage" [@"t - 1"] > $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [5.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [5.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [5.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [5.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [6.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [5.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [6.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [6.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [6.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [7.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [6.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [7.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [7.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [7.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.UpstreamStorage" [@"t - 1"] <= $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 0.00000000] AND $ "Other Data.UpstreamStorage" [@"t - 1"] > $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [9.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [9.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [9.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [9.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [10.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [9.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [10.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [10.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [10.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [11.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [10.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [11.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [11.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [11.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.UpstreamStorage" [@"t - 1"] <= $ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 0.00000000] AND $ "Other Data.UpstreamStorage" [@"t - 1"] > $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [13.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [13.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [13.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [13.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [14.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [13.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [14.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [14.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [14.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [15.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [14.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [15.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [15.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [15.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := $ "Demand Data.UpstreamReductionStatus" [@"t - 1"];

      END_IF_STATEMENT;

    END;

    RULE                 "Pineview Pool";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "Protected Pools.Pineview" [] := "Max"( $ "RES7 Pineview.Storage" [] - $ "Protected Pools.Ogden River Project Pineview" [], 0.00000000 "acre-ft" );

    END;

    RULE                 "East Canyon Pool";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "Protected Pools.East Canyon" [] := "Max"( $ "RES5 East Canyon.Storage" [] - $ "Protected Pools.Davis Weber Canal East Canyon" [], 0.00000000 "acre-ft" );

    END;

    RULE                 "Protected Pools Rule";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      IF_STATEMENT (@"t" == "CompletePartialDate"( @"April", @"t" )) THEN
            $ "Protected Pools.Ogden River Project Pineview" [] := "Min"( 44000.00000000 "acre-ft", $ "RES7 Pineview.Storage" [] - $ "Reservoir Data.Min Storages" [6.00000000, 0.00000000] );

            $ "Protected Pools.Davis Weber Canal East Canyon" [] := "Min"( 28800.00000000 "acre-ft", $ "RES5 East Canyon.Storage" [] - $ "Reservoir Data.Min Storages" [4.00000000, 0.00000000] );

      ELSE
            IF_STATEMENT (@"t" == "CompletePartialDate"( @"May", @"t" )) THEN
            $ "Protected Pools.Ogden River Project Pineview" [] := "Min"( 44000.00000000 "acre-ft", $ "RES7 Pineview.Storage" [] - $ "Reservoir Data.Min Storages" [6.00000000, 0.00000000] );

            $ "Protected Pools.Davis Weber Canal East Canyon" [] := "Min"( 28800.00000000 "acre-ft", $ "RES5 East Canyon.Storage" [] - $ "Reservoir Data.Min Storages" [4.00000000, 0.00000000] );

      ELSE
            IF_STATEMENT (@"t" == "CompletePartialDate"( @"June", @"t" )) THEN
            $ "Protected Pools.Ogden River Project Pineview" [] := "Min"( 44000.00000000 "acre-ft", $ "RES7 Pineview.Storage" [] - $ "Reservoir Data.Min Storages" [6.00000000, 0.00000000] );

            $ "Protected Pools.Davis Weber Canal East Canyon" [] := "Min"( 28800.00000000 "acre-ft", $ "RES5 East Canyon.Storage" [] - $ "Reservoir Data.Min Storages" [4.00000000, 0.00000000] );

      ELSE
            $ "Protected Pools.Ogden River Project Pineview" [] := $ "Protected Pools.Ogden River Project Pineview" [@"t - 1"];

            $ "Protected Pools.Davis Weber Canal East Canyon" [] := $ "Protected Pools.Davis Weber Canal East Canyon" [@"t - 1"];

      END_IF_STATEMENT;

      END_IF_STATEMENT;

      END_IF_STATEMENT;

    END;

    RULE                 "AREA9 Bypass";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "Weber River Near Stoddard 1.Minimum Diversion Bypass" [] := "Max"( $ "East Canyon Creek.Outflow" [] - "MinFlow"( % "RES5 East Canyon", 300.00000000 "acre-ft/month" ), 0.00000000 "acre-ft/month" );

    END;

    RULE                 "Willard Release";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "RES8 Willard Bay.Release" [] := 0.00000000 "acre-ft/month";

    END;

    RULE                 "Div Request SA11";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      IF_STATEMENT ($ "RES3 Echo.Storage" [] < $ "Other Data.DW Pump Criteria Echo" [] AND $ "RES5 East Canyon.Storage" [] < $ "Other Data.DW Pump Criteria East Canyon" []) THEN
            $ "Davis Weber Canal Diversion 1.Diversion Request" [] := $ "Davis Weber Canal Diversion:SA11 Davis Weber Canal.Diversion Requested" [] * 0.10000000;

            $ "Davis Weber Canal PUMP Diversion 2.Diversion Request" [] := $ "Davis Weber Canal Diversion:SA11 Davis Weber Canal.Diversion Requested" [] * 0.90000000;

      ELSE
            $ "Davis Weber Canal PUMP Diversion 2.Diversion Request" [] := 0.00000000 "acre-feet/month";

      END_IF_STATEMENT;

    END;

    RULE                 "Div Request RES8";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "Willard Diversion.Diversion Request" [] := 0.00000000 "cfs";

    END;

    RULE                 "RES9 Div Request Mar-Jun";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#ffaa00";
    NOTES                "";
    BEGIN

      IF_STATEMENT (( @"t" == "CompletePartialDate"( @"March", @"t" ) OR @"t" == "CompletePartialDate"( @"April", @"t" ) OR @"t" == "CompletePartialDate"( @"May", @"t" ) OR @"t" == "CompletePartialDate"( @"June", @"t" ) ) AND $ "RES9 Gravel Pit.Storage" [@"t - 1"] < 16000.00000000 "acre-feet") THEN
            $ "New Res Diversion.Diversion Request" [] := 16000.00000000 "acre-feet/month" - $ "RES9 Gravel Pit.Storage" [@"t - 1"] / "GetTimestep"( @"t" );

      ELSE
            $ "New Res Diversion.Diversion Request" [] := 0.00000000 "acre-feet/month";

      END_IF_STATEMENT;

    END;

    RULE                 "RES9 Div Request Year Round";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#ffaa00";
    NOTES                "";
    BEGIN

      $ "New Res Diversion.Diversion Request" [] := "Min"( 16000.00000000 "acre-feet/month" - $ "RES9 Gravel Pit.Storage" [@"t - 1"] / "GetTimestep"( @"t" ), 13.00000000 "cfs" );

    END;

    RULE                 "ASR Pumped Flow";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#00aa7f";
    NOTES                "";
    BEGIN

      $ "WBWCD ASR.Pumped Flow" [] := 0.00000000 "acre-feet/month";

    END;

    RULE                 "ASR Div Request Mar-Aug";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#00aa7f";
    NOTES                "";
    BEGIN

      IF_STATEMENT (@"t" == "CompletePartialDate"( @"March", @"t" ) OR @"t" == "CompletePartialDate"( @"April", @"t" ) OR @"t" == "CompletePartialDate"( @"May", @"t" ) OR @"t" == "CompletePartialDate"( @"June", @"t" ) OR @"t" == "CompletePartialDate"( @"July", @"t" ) OR @"t" == "CompletePartialDate"( @"August", @"t" )) THEN
            $ "New Res Diversion.Diversion Request" [] := 1667.00000000 "acre-feet/month";

      ELSE
            $ "New Res Diversion.Diversion Request" [] := 0.00000000 "acre-feet/month";

      END_IF_STATEMENT;

    END;

    RULE                 "ASR Accounting";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#00aa7f";
    NOTES                "";
    BEGIN

      IF_STATEMENT (@"t" == "CompletePartialDate"( @"January", @"t" )) THEN
            $ "Other Data.ASRCurrentYr" [] := 0.00000000 "acre-feet";

            $ "Other Data.ASRYr1" [] := $ "Other Data.ASRCurrentYr" [@"t - 1"];

            $ "Other Data.ASRYr2" [] := $ "Other Data.ASRYr1" [@"t - 1"];

            $ "Other Data.ASRHalf" [] := ( $ "Other Data.ASRYr2" [@"t - 1"] + $ "Other Data.ASRHalf" [@"t - 1"] ) * 0.50000000;

            $ "WBWCD ASR.Percolation" [] := ( $ "Other Data.ASRYr2" [@"t - 1"] + $ "Other Data.ASRHalf" [@"t - 1"] ) * 0.50000000 / "GetTimestep"( @"t" );

      ELSE
            $ "Other Data.ASRCurrentYr" [] := $ "Other Data.ASRCurrentYr" [@"t - 1"] + $ "WBWCD ASR.Inflow" [@"t - 1"] * "GetTimestep"( @"t" );

            $ "Other Data.ASRYr1" [] := $ "Other Data.ASRYr1" [@"t - 1"];

            $ "Other Data.ASRYr2" [] := $ "Other Data.ASRYr2" [@"t - 1"];

            $ "Other Data.ASRHalf" [] := $ "Other Data.ASRHalf" [@"t - 1"];

      END_IF_STATEMENT;

    END;

    RULE                 "RES10 Rel";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#ff55ff";
    NOTES                "";
    BEGIN

      % "RES10 Chalk Creek" & "Outflow" [] := "MinFlow"( % "RES10 Chalk Creek", 0.00000000 "acre-ft/month" );

    END;

    RULE                 "RES9 Rel";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#ffaa00";
    NOTES                "";
    BEGIN

      % "RES9 Gravel Pit" & "Outflow" [] := "MinFlow"( % "RES9 Gravel Pit", 0.00000000 "acre-ft/month" );

    END;

    RULE                 "RES7 Rel";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES7 Pineview" & "Outflow" [] := "MinFlow"( % "RES7 Pineview", 600.00000000 "acre-ft/month" );

    END;

    RULE                 "RES6 Rel";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES6 Causey" & "Outflow" [] := "MinFlow"( % "RES6 Causey", 600.00000000 "acre-ft/month" );

    END;

    RULE                 "RES5 Rel";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES5 East Canyon" & "Outflow" [] := "MinFlow"( % "RES5 East Canyon", 300.00000000 "acre-ft/month" );

    END;

    RULE                 "RES4 Rel";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES4 Lost Creek" & "Outflow" [] := "MinFlow"( % "RES4 Lost Creek", 450.00000000 "acre-ft/month" );

    END;

    RULE                 "RES3 Rel";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES3 Echo" & "Outflow" [] := "MinFlow"( % "RES3 Echo", 0.00000000 "acre-ft/month" );

    END;

    RULE                 "RES2 Rel";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES2 Rockport" & "Outflow" [] := "MinFlow"( % "RES2 Rockport", 3000.00000000 "acre-ft/month" );

    END;

    RULE                 "RES1 Rel";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      % "RES1 Smith And Morehouse" & "Outflow" [] := "MinFlow"( % "RES1 Smith And Morehouse", 450.00000000 "acre-ft/month" );

    END;

    RULE                 "SA14 Bypass";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "Ogden River Below Pineview 2.Minimum Diversion Bypass" [] := 600.00000000 "acre-ft/month";

    END;

    RULE                 "SA13 Bypass";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "Ogden River Below Pinview 1.Minimum Diversion Bypass" [] := "Max"( 600.00000000 "acre-ft/month" - $ "Q60 Wheeler Creek.Gage Outflow" [], 0.00000000 "acre-ft/month" );

    END;

    RULE                 "SA3 Bypass";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      $ "Weber River Near Wanship.Minimum Diversion Bypass" [] := 3000.00000000 "acre-ft/month";

    END;

    RULE                 "Weber Provo Div Request - Check Echo";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      IF_STATEMENT ($ "Other Data.EchoCheck" [] != 1.00000000) THEN
            $ "Weber Provo Diversion:SA1 Weber Provo Canal.Diversion Requested" [] := 0.00000000 "acre-feet/month";

      END_IF_STATEMENT;

    END;

    RULE                 "SetEchoCheck";
    DESCRIPTION          "";
    ACTIVE               TRUE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
    NOTES                "";
    BEGIN

      IF_STATEMENT (@"t" == "RunStartDate"(  )) THEN
            $ "Other Data.EchoCheck" [] := 1.00000000;

      ELSE
            IF_STATEMENT ("CompletePartialDate"( @"April 30", @"t" ) == @"t") THEN
            $ "Other Data.EchoCheck" [] := 0.00000000;

      ELSE
            IF_STATEMENT ($ "Other Data.EchoCheck" [@"t - 1"] == 1.00000000) THEN
            $ "Other Data.EchoCheck" [] := 1.00000000;

      ELSE
            IF_STATEMENT ($ "RES3 Echo.Storage" [] >= 73000.00000000 "acre-feet") THEN
            $ "Other Data.EchoCheck" [] := 1.00000000;

      ELSE
            $ "Other Data.EchoCheck" [] := 0.00000000;

      END_IF_STATEMENT;

      END_IF_STATEMENT;

      END_IF_STATEMENT;

      END_IF_STATEMENT;

    END;

    RULE                 "Crop Fallowing Reduction";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#0055ff";
    NOTES                "";
    BEGIN

      IF_STATEMENT ($ "Demand Data.ReductionStatus" [] > 2.00000000) THEN
            $ "Davis Weber Canal Diversion:SA11 Davis Weber Canal.Diversion Requested" [] := $ "Demand Data.AnnualDemands" [10.00000000, 0.00000000] / "GetDaysInMonth"( @"t" ) * $ "Demand Data.SA11 Demand Pattern" [@"t", 0.00000000] * ( 1.00000000 - 1.00000000 / 242600.00000000 * 10000.00000000 );

            $ "Ogden Brigham and S Ogden Highline Canals:SA13 Ogden Brigham and S Ogden Highline Canals.Diversion Requested" [] := $ "Demand Data.AnnualDemands" [12.00000000, 0.00000000] / "GetDaysInMonth"( @"t" ) * $ "Demand Data.SA13 Demand Pattern" [@"t", 0.00000000] * ( 1.00000000 - 1.00000000 / 242600.00000000 * 10000.00000000 );

            $ "Slaterville Diversion:SA15 Slaterville.Diversion Requested" [] := $ "Demand Data.AnnualDemands" [14.00000000, 0.00000000] / "GetDaysInMonth"( @"t" ) * $ "Demand Data.SA15 Demand Pattern" [@"t", 0.00000000] * ( 1.00000000 - 1.00000000 / 242600.00000000 * 10000.00000000 );

            $ "Warren Canal Diversion:SA16 Warren Canal.Diversion Requested" [] := $ "Demand Data.AnnualDemands" [15.00000000, 0.00000000] / "GetDaysInMonth"( @"t" ) * $ "Demand Data.SA16 Demand Pattern" [@"t", 0.00000000] * ( 1.00000000 - 1.00000000 / 242600.00000000 * 10000.00000000 );

      ELSE
            $ "Davis Weber Canal Diversion:SA11 Davis Weber Canal.Diversion Requested" [] := $ "Demand Data.AnnualDemands" [10.00000000, 0.00000000] / "GetDaysInMonth"( @"t" ) * $ "Demand Data.SA11 Demand Pattern" [@"t", 0.00000000];

            $ "Ogden Brigham and S Ogden Highline Canals:SA13 Ogden Brigham and S Ogden Highline Canals.Diversion Requested" [] := $ "Demand Data.AnnualDemands" [12.00000000, 0.00000000] / "GetDaysInMonth"( @"t" ) * $ "Demand Data.SA13 Demand Pattern" [@"t", 0.00000000];

            $ "Slaterville Diversion:SA15 Slaterville.Diversion Requested" [] := $ "Demand Data.AnnualDemands" [14.00000000, 0.00000000] / "GetDaysInMonth"( @"t" ) * $ "Demand Data.SA15 Demand Pattern" [@"t", 0.00000000];

            $ "Warren Canal Diversion:SA16 Warren Canal.Diversion Requested" [] := $ "Demand Data.AnnualDemands" [15.00000000, 0.00000000] / "GetDaysInMonth"( @"t" ) * $ "Demand Data.SA16 Demand Pattern" [@"t", 0.00000000];

      END_IF_STATEMENT;

    END;

    RULE                 "Crop Fallowing Status Check";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT TRUE;
  NAMES_COLOR  "#0055ff";
    NOTES                "";
    BEGIN

      $ "Demand Data.ReductionStatus" [] := "Max"( $ "Demand Data.TotalReductionStatus" [], $ "Demand Data.UpstreamReductionStatus" [] );

    END;

    RULE                 "Crop Fallowing Total Status Check";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT TRUE;
  NAMES_COLOR  "#0055ff";
    NOTES                "";
    BEGIN

    DESCRIPTION          "<comment>reduction status can take values of 1, 2, 3, and 4, which correspond with a Green, <br>Yellow, Orange, and Red reduction respectively. <br>";
      IF_STATEMENT (@"t" == "CompletePartialDate"( @"March", @"t" )) THEN
            IF_STATEMENT ($ "Other Data.TotalStorage" [@"t - 1"] <= $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 0.00000000]) THEN
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [0.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [1.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [1.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [1.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [1.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [2.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [1.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [2.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [2.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [2.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [3.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [2.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [3.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [3.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [3.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.TotalStorage" [@"t - 1"] <= $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 0.00000000] AND $ "Other Data.TotalStorage" [@"t - 1"] > $ "Demand Data.TotalStorageReductionLookup" [0.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [4.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [5.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [5.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [5.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [5.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [6.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [5.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [6.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [6.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [6.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [7.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [6.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [7.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [7.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [7.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.TotalStorage" [@"t - 1"] <= $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 0.00000000] AND $ "Other Data.TotalStorage" [@"t - 1"] > $ "Demand Data.TotalStorageReductionLookup" [4.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [8.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [9.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [9.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [9.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [9.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [10.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [9.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [10.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [10.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [10.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [11.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [10.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [11.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [11.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [11.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.TotalStorage" [@"t - 1"] <= $ "Demand Data.TotalStorageReductionLookup" [12.00000000, 0.00000000] AND $ "Other Data.TotalStorage" [@"t - 1"] > $ "Demand Data.TotalStorageReductionLookup" [8.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [12.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [12.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [12.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [12.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [13.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [12.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [13.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [13.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [13.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [14.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [13.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [14.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [14.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [14.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.TotalStorageReductionLookup" [15.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.TotalStorageReductionLookup" [14.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.TotalStorageReductionLookup" [15.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.TotalReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [15.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.TotalStorageReductionLookup" [15.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.TotalReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF;

      ELSE
            $ "Demand Data.TotalReductionStatus" [] := $ "Demand Data.TotalReductionStatus" [@"t - 1"];

      END_IF_STATEMENT;

    END;

    RULE                 "Crop Fallowing Upstream Status Check";
    DESCRIPTION          "";
    ACTIVE               FALSE;
    RULE_EXEC_CONSTRAINT NOT "HasRuleFiredSuccessfully"( "Current Rule" );
  NAMES_COLOR  "#0055ff";
    NOTES                "";
    BEGIN

    DESCRIPTION          "<comment>reduction status can take values of 1, 2, 3, and 4, which correspond with a Green, <br>Yellow, Orange, and Red reduction respectively. <br>";
      IF_STATEMENT (@"t" == "CompletePartialDate"( @"March", @"t" )) THEN
            IF_STATEMENT ($ "Other Data.UpstreamStorage" [@"t - 1"] <= $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 0.00000000]) THEN
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [1.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [1.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [1.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [1.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [2.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [1.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [2.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [2.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [2.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [3.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [2.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [3.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [3.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [3.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.UpstreamStorage" [@"t - 1"] <= $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 0.00000000] AND $ "Other Data.UpstreamStorage" [@"t - 1"] > $ "Demand Data.UpstreamStorageReductionLookup" [0.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [5.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [5.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [5.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [5.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [6.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [5.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [6.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [6.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [6.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [7.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [6.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [7.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [7.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [7.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.UpstreamStorage" [@"t - 1"] <= $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 0.00000000] AND $ "Other Data.UpstreamStorage" [@"t - 1"] > $ "Demand Data.UpstreamStorageReductionLookup" [4.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [9.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [9.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [9.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [9.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [10.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [9.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [10.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [10.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [10.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [11.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [10.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [11.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [11.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [11.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.UpstreamStorage" [@"t - 1"] <= $ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 0.00000000] AND $ "Other Data.UpstreamStorage" [@"t - 1"] > $ "Demand Data.UpstreamStorageReductionLookup" [8.00000000, 0.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 1.00000000]) THEN
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [13.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [12.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [13.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [13.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [13.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [14.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [13.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [14.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [14.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [14.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF
      ELSEIF_COND ( $ "Other Data.PVandGWInflows" [] <= $ "Demand Data.UpstreamStorageReductionLookup" [15.00000000, 1.00000000] AND $ "Other Data.PVandGWInflows" [] > $ "Demand Data.UpstreamStorageReductionLookup" [14.00000000, 1.00000000] )
      ELSEIF_CLAUSE
            IF_STATEMENT ($ "Demand Data.UpstreamStorageReductionLookup" [15.00000000, 4.00000000] > $ "Demand Data.DemandReductionProbThreshold" []) THEN
            $ "Demand Data.UpstreamReductionStatus" [] := 4.00000000;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := 1.00000000;

      END_IF_STATEMENT
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [15.00000000, 3.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 3.00000000;
      END_ELSEIF
      ELSEIF_COND ( $ "Demand Data.UpstreamStorageReductionLookup" [15.00000000, 2.00000000] > $ "Demand Data.DemandReductionProbThreshold" [] )
      ELSEIF_CLAUSE
            $ "Demand Data.UpstreamReductionStatus" [] := 2.00000000;
      END_ELSEIF;
      END_ELSEIF;
      END_ELSEIF;

      ELSE
            $ "Demand Data.UpstreamReductionStatus" [] := $ "Demand Data.UpstreamReductionStatus" [@"t - 1"];

      END_IF_STATEMENT;

    END;

  END;

  UTILITY_GROUP "Utility Group";
  DESCRIPTION   "";
  ACTIVE        TRUE;
  NOTES          "";
  BEGIN

    FUNCTION       "MaxRelease" ( OBJECT Reservoir, NUMERIC MinStorage )
    RETURN_TYPE    NUMERIC;
    SCALE_UNITS    "";
    DESCRIPTION    "";
    ACTIVE         TRUE;
    PRE_EXEC_DIAG  FALSE;
    POST_EXEC_DIAG FALSE;
    NOTES          "";
    BEGIN

      "Max"( Reservoir & "Inflow" [] + Reservoir & "Storage" [@"t - 1"] / "GetTimestep"( @"t" ) - MinStorage / "GetTimestep"( @"t" ), 0.00000000 "cfs" );

    END;

    FUNCTION       "ShortageCall" ( LIST short, OBJECT res )
    RETURN_TYPE    NUMERIC;
    SCALE_UNITS    "";
    DESCRIPTION    "";
    ACTIVE         TRUE;
    PRE_EXEC_DIAG  FALSE;
    POST_EXEC_DIAG FALSE;
    MAX_CONSTRAINT "SolveOutflow"( res, res & "Inflow" [], $ "Reservoir Data.Min Storages" [STRINGIFY res, 0.00000000], res & "Storage" [@"t - 1"], @"t" );
    MIN_CONSTRAINT 0.00000000 "cfs";
    NOTES          "";
    BEGIN

      IF ( FOR ( OBJECT area IN short ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR > 0.00000000 "acre-ft/month" )
 THEN
  FOR ( OBJECT area IN short ) STAT_SUM
   area & "Diversion Shortage" []
  ENDFOR + res & "Outflow" []
 ELSE
  res & "Outflow" []
 ENDIF;

    END;

    FUNCTION       "ShortageCallGW" ( LIST short, OBJECT gw )
    RETURN_TYPE    NUMERIC;
    SCALE_UNITS    "";
    DESCRIPTION    "";
    ACTIVE         TRUE;
    PRE_EXEC_DIAG  FALSE;
    POST_EXEC_DIAG FALSE;
    MIN_CONSTRAINT 0.00000000 "cfs";
    NOTES          "";
    BEGIN

      IF ( FOR ( OBJECT area IN short ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR > 0.00000000 "acre-ft/month" )
 THEN
  "Min"( FOR ( OBJECT area IN short ) STAT_SUM
   area & "Diversion Shortage" []
  ENDFOR, ( $ "Other Data.ASRHalf" [] + $ "Other Data.ASRYr1" [] + $ "Other Data.ASRYr2" [] ) / "GetTimestep"( @"t" ) )
 ELSE
  gw & "Pumped Flow" []
 ENDIF;

    END;

    FUNCTION       "ShortageCallPool" ( LIST short, OBJECT res, SLOT pool, NUMERIC factor )
    RETURN_TYPE    NUMERIC;
    SCALE_UNITS    "";
    DESCRIPTION    "";
    ACTIVE         TRUE;
    PRE_EXEC_DIAG  FALSE;
    POST_EXEC_DIAG FALSE;
    MAX_CONSTRAINT "SolveOutflow"( res, res & "Inflow" [], $ "Reservoir Data.Min Storages" [STRINGIFY res, 0.00000000], res & "Storage" [@"t - 1"], @"t" );
    MIN_CONSTRAINT 0.00000000 "cfs";
    NOTES          "";
    BEGIN

      IF ( FOR ( OBJECT area IN short ) STAT_SUM
  area & "Diversion Shortage" []
 ENDFOR > 0.00000000 "acre-ft/month" )
 THEN
  "Min"( FOR ( OBJECT area IN short ) STAT_SUM
   area & "Diversion Shortage" []
  ENDFOR, "VolumeToFlow"( pool [] * factor, @"t" ) ) + res & "Outflow" []
 ELSE
  res & "Outflow" []
 ENDIF;

    END;

    FUNCTION       "ShortageCallPoolOld" ( OBJECT area, OBJECT res, SLOT pool, NUMERIC factor )
    RETURN_TYPE    NUMERIC;
    SCALE_UNITS    "";
    DESCRIPTION    "";
    ACTIVE         TRUE;
    PRE_EXEC_DIAG  FALSE;
    POST_EXEC_DIAG FALSE;
    MAX_CONSTRAINT "SolveOutflow"( res, res & "Inflow" [], $ "Reservoir Data.Min Storages" [STRINGIFY res, 0.00000000], res & "Storage" [@"t - 1"], @"t" );
    MIN_CONSTRAINT 0.00000000 "cfs";
    NOTES          "";
    BEGIN

      IF ( area & "Diversion Shortage" [] > 0.00000000 "acre-ft/month" )
 THEN
  "Min"( area & "Diversion Shortage" [], "VolumeToFlow"( pool [] * factor, @"t" ) ) + res & "Outflow" []
 ELSE
  res & "Outflow" []
 ENDIF;

    END;

    FUNCTION       "MinFlow" ( OBJECT Res, NUMERIC MinFlow )
    RETURN_TYPE    NUMERIC;
    SCALE_UNITS    "";
    DESCRIPTION    "";
    ACTIVE         TRUE;
    PRE_EXEC_DIAG  FALSE;
    POST_EXEC_DIAG FALSE;
    NOTES          "";
    BEGIN

      "Max"( "Min"( MinFlow, "SolveOutflow"( Res, Res & "Inflow" [], $ "Reservoir Data.Min Storages" [STRINGIFY Res, 0.00000000], Res & "Storage" [@"t - 1"], @"t" ) ), "Max"( "SolveOutflow"( Res, Res & "Inflow" [], $ "Reservoir Data.Max Storages" [STRINGIFY Res, 0.00000000], Res & "Storage" [@"t - 1"], @"t" ), 0.00000000 "acre-feet/month" ) );

    END;

  END;

END
