#Output Data Compilation

### Clear any existing data or functions.
rm(list=ls())
## Linear Average looking forward

#Read in Compiled CSV

setwd("~/GitHub/WeberBasinVulnerability/WeberBasinVulnerability/2 - RiverWare Modeling/ScenarioSet/D M")

Reservoir_Elevations_Combined <- read.csv("Combined CSV Reservoir Elevations.csv")
i=1
j=2872


Res_Elev <- data.frame(c(1:2872))

while (i<=TotalTraces) {
  Res_Elev[,i] <- Reservoir_Elevations_Combined[(j-2871):j,5]
  i=i+1
  j=2872*i
}

View(Res_Elev)

#Plots

###----------------------------Parallel Plots------------------------------------------------
library(plotly)

Res_Elev[,37:38] <- Reservoir_Elevations_Combined[1:2872,3:4]

df <-Res_Elev

Pp <- df %>%
  plot_ly(type = 'parcoords',
            dimensions = list(
            list(range = c(3500,8500),
                 label = 'Res Elev 1', values = Res_Elev[1:10,1]),
            list(range = c(4000,8500),
                 constraintrange = c(4500,6500),
                 label = 'Res_Elev 2', values = Res_Elev[1:10,2])
          )
  )

## ------------ title = 'Smith and Morehouse Reservoir'  -------

Pp <- df %>%
plot_ly(type = 'parcoords',
dimensions = list(
list(range = c(7640,7690),
label = 'T1T1', values = Res_Elev[1:359,1]),
list(range = c(7640,7690),
label = 'T1T2', values = Res_Elev[1:359,2]),
list(range = c(7640,7690),
label = 'T1T3', values = Res_Elev[1:359,3]),
list(range = c(7640,7690),
label = 'T1T4', values = Res_Elev[1:359,4]),
list(range = c(7640,7690),
label = 'T1T5', values = Res_Elev[1:359,5]),
list(range = c(7640,7690),
label = 'T1T6', values = Res_Elev[1:359,6]),
list(range = c(7640,7690),
label = 'T2T1', values = Res_Elev[1:359,7]),
list(range = c(7640,7690),
label = 'T2T2', values = Res_Elev[1:359,8]),
list(range = c(7640,7690),
label = 'T2T3', values = Res_Elev[1:359,9]),
list(range = c(7640,7690),
label = 'T2T4', values = Res_Elev[1:359,10]),
list(range = c(7640,7690),
label = 'T2T5', values = Res_Elev[1:359,11]),
list(range = c(7640,7690),
label = 'T2T6', values = Res_Elev[1:359,12]),
list(range = c(7640,7690),
label = 'T3T1', values = Res_Elev[1:359,13]),
list(range = c(7640,7690),
label = 'T3T2', values = Res_Elev[1:359,14]),
list(range = c(7640,7690),
label = 'T3T3', values = Res_Elev[1:359,15]),
list(range = c(7640,7690),
label = 'T3T4', values = Res_Elev[1:359,16]),
list(range = c(7640,7690),
label = 'T3T5', values = Res_Elev[1:359,17]),
list(range = c(7640,7690),
label = 'T3T6', values = Res_Elev[1:359,18]),
list(range = c(7640,7690),
label = 'T4T1', values = Res_Elev[1:359,19]),
list(range = c(7640,7690),
label = 'T4T2', values = Res_Elev[1:359,20]),
list(range = c(7640,7690),
label = 'T4T3', values = Res_Elev[1:359,21]),
list(range = c(7640,7690),
label = 'T4T4', values = Res_Elev[1:359,22]),
list(range = c(7640,7690),
label = 'T4T5', values = Res_Elev[1:359,23]),
list(range = c(7640,7690),
label = 'T4T6', values = Res_Elev[1:359,24]),
list(range = c(7640,7690),
label = 'T5T1', values = Res_Elev[1:359,25]),
list(range = c(7640,7690),
label = 'T5T2', values = Res_Elev[1:359,26]),
list(range = c(7640,7690),
label = 'T5T3', values = Res_Elev[1:359,27]),
list(range = c(7640,7690),
label = 'T5T4', values = Res_Elev[1:359,28]),
list(range = c(7640,7690),
label = 'T5T5', values = Res_Elev[1:359,29]),
list(range = c(7640,7690),
label = 'T5T6', values = Res_Elev[1:359,30]),
list(range = c(7640,7690),
label = 'T6T1', values = Res_Elev[1:359,31]),
list(range = c(7640,7690),
label = 'T6T2', values = Res_Elev[1:359,32]),
list(range = c(7640,7690),
label = 'T6T3', values = Res_Elev[1:359,33]),
list(range = c(7640,7690),
label = 'T6T4', values = Res_Elev[1:359,34]),
list(range = c(7640,7690),
label = 'T6T5', values = Res_Elev[1:359,35]),
list(range = c(7640,7690),
label = 'T6T6', values = Res_Elev[1:359,36])
)
)

Pp

## ------------ title = 'Rockport Reservoir'  -------

Pp <- df %>%
  plot_ly(type = 'parcoords',
          dimensions = list(
            list(range = c(5000,6100),
                 label = 'T1T1', values = Res_Elev[360:719,1]),
            list(range = c(5000,6100),
                 label = 'T1T2', values = Res_Elev[360:719,2]),
            list(range = c(5000,6100),
                 label = 'T1T3', values = Res_Elev[360:719,3]),
            list(range = c(5000,6100),
                 label = 'T1T4', values = Res_Elev[360:719,4]),
            list(range = c(5000,6100),
                 label = 'T1T5', values = Res_Elev[360:719,5]),
            list(range = c(5000,6100),
                 label = 'T1T6', values = Res_Elev[360:719,6]),
            list(range = c(5000,6100),
                 label = 'T2T1', values = Res_Elev[360:719,7]),
            list(range = c(5000,6100),
                 label = 'T2T2', values = Res_Elev[360:719,8]),
            list(range = c(5000,6100),
                 label = 'T2T3', values = Res_Elev[360:719,9]),
            list(range = c(5000,6100),
                 label = 'T2T4', values = Res_Elev[360:719,10]),
            list(range = c(5000,6100),
                 label = 'T2T5', values = Res_Elev[360:719,11]),
            list(range = c(5000,6100),
                 label = 'T2T6', values = Res_Elev[360:719,12]),
            list(range = c(5000,6100),
                 label = 'T3T1', values = Res_Elev[360:719,13]),
            list(range = c(5000,6100),
                 label = 'T3T2', values = Res_Elev[360:719,14]),
            list(range = c(5000,6100),
                 label = 'T3T3', values = Res_Elev[360:719,15]),
            list(range = c(5000,6100),
                 label = 'T3T4', values = Res_Elev[360:719,16]),
            list(range = c(5000,6100),
                 label = 'T3T5', values = Res_Elev[360:719,17]),
            list(range = c(5000,6100),
                 label = 'T3T6', values = Res_Elev[360:719,18]),
            list(range = c(5000,6100),
                 label = 'T4T1', values = Res_Elev[360:719,19]),
            list(range = c(5000,6100),
                 label = 'T4T2', values = Res_Elev[360:719,20]),
            list(range = c(5000,6100),
                 label = 'T4T3', values = Res_Elev[360:719,21]),
            list(range = c(5000,6100),
                 label = 'T4T4', values = Res_Elev[360:719,22]),
            list(range = c(5000,6100),
                 label = 'T4T5', values = Res_Elev[360:719,23]),
            list(range = c(5000,6100),
                 label = 'T4T6', values = Res_Elev[360:719,24]),
            list(range = c(5000,6100),
                 label = 'T5T1', values = Res_Elev[360:719,25]),
            list(range = c(5000,6100),
                 label = 'T5T2', values = Res_Elev[360:719,26]),
            list(range = c(5000,6100),
                 label = 'T5T3', values = Res_Elev[360:719,27]),
            list(range = c(5000,6100),
                 label = 'T5T4', values = Res_Elev[360:719,28]),
            list(range = c(5000,6100),
                 label = 'T5T5', values = Res_Elev[360:719,29]),
            list(range = c(5000,6100),
                 label = 'T5T6', values = Res_Elev[360:719,30]),
            list(range = c(5000,6100),
                 label = 'T6T1', values = Res_Elev[360:719,31]),
            list(range = c(5000,6100),
                 label = 'T6T2', values = Res_Elev[360:719,32]),
            list(range = c(5000,6100),
                 label = 'T6T3', values = Res_Elev[360:719,33]),
            list(range = c(5000,6100),
                 label = 'T6T4', values = Res_Elev[360:719,34]),
            list(range = c(5000,6100),
                 label = 'T6T5', values = Res_Elev[360:719,35]),
            list(range = c(5000,6100),
                 label = 'T6T6', values = Res_Elev[360:719,36])
          )
  )

Pp



##------ CSV combiled outside or RiverWare (Has problems) --------------------------------------------------


#Input data from RiverWare Outputs

#setwd("~/GitHub/WeberBasinVulnerability/WeberBasinVulnerability/2 - RiverWare Modeling/Scenario")

#File Folder Directory lookup

#Trace1,Trace1,RiverWare MRM,Weber Basin RiverWare Model,RiverWare Policy

#Format for output file
#Reservoir_Elevations <- read.csv("Trace1,Trace1,RiverWare MRM,Weber Basin RiverWare Model,RiverWare Policy/Reservoir Elevations.csv")

#Annual_Demands <- read.csv("Trace1,Trace1,RiverWare MRM,Weber Basin RiverWare Model,RiverWare Policy/Reservoir Elevations.csv")

#Create TraceFolder Naming lookup

#TraceNumber <- 6  # number of traces considered,  possibly write a code to count
#TraceNumber1 <- 6  # number of traces considered,  possibly write a code to count
#TotalTraces <- TraceNumber*TraceNumber1

#for(TTNum in 1:(TotalTraces)){
 # for(TNum in 1:(TraceNumber)) {

  #  TraceDirectory0 <- paste0("Trace",TraceNumber)

   # for(TNum1 in 1:(TraceNumber1)) {
    #  TraceDirectory <- paste0(TraceDirectory0,",Trace",TNum1)
    #  TraceDirectory <-paste0 (TraceDirectory,",RiverWare MRM,Weber Basin RiverWare Model,RiverWare Policy/Reservoir Elevations.csv")
     # R_E <- read.csv(TraceDirectory)
    #  Reservoir_Elevations[,TTNum] <- R_E[,5]
    #}
  #}
#}
#View(Reservoir_Elevations)

#TraceNumber <- 4  # number of traces considered,  possibly write a code to count
#TraceNumber1 <- 4  # number of traces considered,  possibly write a code to count
#TotalTraces <- TraceNumber*TraceNumber1

#for(TTNum in 1:(TotalTraces)){
 # for(TNum in 1:(TraceNumber)) {

  #  TraceDirectory0 <- paste0("Trace",TraceNumber)

   # for(TNum1 in 1:(TraceNumber1)) {
    #  TraceDirectory <- paste0(TraceDirectory0,",Trace",TNum1)
     # TraceDirectory <-paste0 (TraceDirectory,",RiverWare MRM,Weber Basin RiverWare Model,RiverWare Policy/Annual Demands.csv")
      #A_D <- read.csv(TraceDirectory)
      #Annual_Demands[,TTNum] <- R_E[,5]
  #  }
#  }
#}

#View(Annual_Demands)


#Clean up Data (Delete Zeros)
